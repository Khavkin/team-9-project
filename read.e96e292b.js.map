{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,4ICIzD,I,EAAAC,EAAAJ,EAAA,SCJAK,EAAiB,IAAAC,IAAoBN,EAAA,SAAAO,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WCK5F,MACMC,EADSC,SAASC,cAAc,QACdC,QAAQC,KANhC,IAA4BC,IAQTL,EAPJC,SAASC,cAAc,IAAIG,KACnCC,UAAUC,IAAI,UCFrB,MAAMC,EACK,cADLA,EAEI,aAGJC,EAAoB,CACtBC,KAAMT,SAASC,cAAc,QAC7BS,cAAeV,SAASC,cAAc,yBAO1C,SAASU,IACLH,EAAkBC,KAAKJ,UAAUO,OAAOL,GACxCC,EAAkBC,KAAKJ,UAAUO,OAAOL,GACxC,MAAMM,EAAeL,EAAkBC,KAAKJ,UAAUS,MACtDC,aAAaC,QAAQ,QAASH,E,CARlCL,EAAkBC,KAAKJ,UAAUC,IAAIC,GACrCC,EAAkBE,cAAcO,iBAAiB,SAAUN,GAWrCI,aAAaG,QAAQ,WACrBX,IACdC,EAAkBE,cAAcS,QAAU,OAC1CR,K,8BHdR,MACMS,EADK,IAAI,EAAA7B,EAAA8B,SAAa,kBACRC,UACdC,EAAYvB,SAASC,cAAc,iBACnCuB,GAAW,EAAAC,EAAAC,yBAAwBC,EAAAnC,IAEzC,SAASoC,EAAWC,GAChB,MAAMC,EAAO,IAAIC,KAAKF,GAItB,MAAO,GAHKC,EAAKE,aACHF,EAAKG,WAAa,KACnBH,EAAKI,e,CAkBtB,MAAMC,EAdN,SAAqBC,GACjB,MAAMC,EAAa,IAAIC,IACvB,IAAK,MAAMC,KAAcH,EAAM,CAC3B,MAAMI,EAAoBZ,EAAWW,EAAWE,UAChD,GAAIJ,EAAWK,IAAIF,GAAoB,CACXH,EAAWM,IAAIH,GACvBI,KAAKL,E,MAErBF,EAAWQ,IAAIL,EAAmB,CAACD,G,CAG3C,OAAOF,C,CAGmBS,CAAY1B,GAwB1C,SAAS2B,EAAuBjB,EAAMM,GAClC,MAAMY,EAAYxB,EACZyB,EAAczB,EACpB,IAAI0B,EAAW,GACf,IAAK,MAAMX,KAAcH,EACrBc,IAAY,EAAAC,EAAAC,cAAa,CACrBC,SAAUd,EAAWe,QACrBC,MAAOhB,EAAWgB,MAClBC,QAAS5B,EAAWW,EAAWE,UAAYF,EAAWkB,UACtDC,YAAanB,EAAWoB,aAAepB,EAAWqB,QAClD/D,IAAK0C,EAAW1C,IAChBgE,MAAOtB,EAAWuB,MAClBC,IAAKxB,EAAWwB,MAGxB,MAAO,6EAEDjC,qKAGekB,+IAIAC,+KAOXC,6B,CAOd,SAASc,EAAWC,GAChBA,EAAEC,iBACF,MAAMC,EAAOF,EAAEG,cACa,SAAxBD,EAAKjE,QAAQmE,QACbF,EAAKG,SAAS,GAAGC,MAAMC,QAAU,OACjCL,EAAKG,SAAS,GAAGC,MAAMC,QAAU,SACjCL,EAAKjE,QAAQmE,OAAS,QACtBF,EAAKM,cAAcA,cAAcH,SAAS,GAAGC,MAAMC,QAAU,SAE7DL,EAAKG,SAAS,GAAGC,MAAMC,QAAU,SACjCL,EAAKG,SAAS,GAAGC,MAAMC,QAAU,OACjCL,EAAKjE,QAAQmE,OAAS,OACtBF,EAAKM,cAAcA,cAAcH,SAAS,GAAGC,MAAMG,eAC/C,W,CAzEY,IAApBtD,EAASrC,OACTwC,EAAUoD,UAAY,kIAKtBpD,EAAUoD,UAGd,SAAiCC,GAC7B,IAAIC,EAAO,4CACX,IAAK,MAAM/C,KAAQ8C,EAAsBhG,OAAQ,CAC7C,MAAMkG,EAAmB/B,EACrBjB,EACA8C,EAAsBjC,IAAIb,IAE9B+C,GAAQC,C,CAGZ,OADAD,GAAQ,QACDA,C,CAbeE,CAAwB5C,GAoDlDnC,SAASC,cAAc,cAAcgB,iBAAiB,QAASkC,EAAA6B,YAoB/D,MAAMC,EAAUjF,SAASkF,uBAAuB,2BAC/BC,MAAMC,KAAKH,GAEnBI,KAAIC,GAAeA,EAAYrE,iBAAiB,QAAS+C","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-948f824ccf362ff1.js","src/js/read.js","node_modules/@parcel/runtime-js/lib/runtime-44e7bd74d9a8b620.js","src/js/navigation.js","src/js/components/theme_switcher.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"aTfhT\\\":\\\"read.e96e292b.js\\\",\\\"8OQ7p\\\":\\\"icons.640475a3.svg\\\",\\\"DtdA1\\\":\\\"read.caa6d948.js\\\"}\"));","// Plan\n//  2.3. sort dates in descending order.\n// 7. finish Todos.\n\nimport LocalStorage from './api/local-storage-api';\nimport icons from '../images/icons.svg';\nimport './navigation.js';\nimport './components/theme_switcher';\nimport { createMarkup, onBtnClick } from './news-cards.js';\nimport { normalizeImportFileName } from './utils';\n\nconst ls = new LocalStorage('team-9-project');\nconst readNews = ls.getRead();\nconst galleryEl = document.querySelector('.read-gallery');\nconst iconsURL = normalizeImportFileName(icons);\n\nfunction formatDate(ms) {\n    const date = new Date(ms);\n    const day = date.getDate();\n    const month = date.getMonth() + 1;\n    const year = date.getFullYear();\n    return `${day}/${month}/${year}`;\n}\n\nfunction groupByDate(news) {\n    const readByDate = new Map();\n    for (const newsEntity of news) {\n        const formattedReadDate = formatDate(newsEntity.readdate);\n        if (readByDate.has(formattedReadDate)) {\n            const newsForThisDate = readByDate.get(formattedReadDate);\n            newsForThisDate.push(newsEntity);\n        } else {\n            readByDate.set(formattedReadDate, [newsEntity]);\n        }\n    }\n    return readByDate;\n}\n\nconst readNewsGroupedByDate = groupByDate(readNews);\n\nif (readNews.length === 0) {\n    galleryEl.innerHTML = `<h2 class=\"rip-title\">Sorry, we haven't found any read news.\n    </h2>\n    <div class=\"rip-container container\">\n    </div>`;\n} else {\n    galleryEl.innerHTML = createMarkupForAllDates(readNewsGroupedByDate);\n}\n\nfunction createMarkupForAllDates(readNewsGroupedByDate) {\n    let text = `<ul class=\"read-gallery__list container\">`;\n    for (const date of readNewsGroupedByDate.keys()) {\n        const markupForOneDate = createMarkupForOneDate(\n            date,\n            readNewsGroupedByDate.get(date)\n        );\n        text += markupForOneDate;\n    }\n    text += `</ul>`;\n    return text;\n}\n\nfunction createMarkupForOneDate(date, news) {\n    const iconupURL = iconsURL; //icons.slice(0, icons.indexOf('icon-up'));\n    const iconDownURL = iconsURL; //iconsURL.slice(0,icons.indexOf('icon-down'));\n    let newsList = '';\n    for (const newsEntity of news) {\n        newsList += createMarkup({\n            abstract: newsEntity.snippet,\n            title: newsEntity.title,\n            updated: formatDate(newsEntity.readdate || newsEntity.newsdate),\n            nytdsection: newsEntity.sectionname || newsEntity.section,\n            url: newsEntity.url,\n            media: newsEntity.image,\n            uri: newsEntity.uri,\n        });\n    }\n    return `<li class=\"read-gallery__item\">\n        <div class=\"date-span\">\n        ${date}   \n        <span class=\"read-gallery__iconswrap\" data-opened=\"true\">\n        <svg class=\"read-gallery__iconup\" width=\"9\" height=\"14\">\n            <use href=\"${iconupURL}#icon-up\">\n            </use>\n        </svg>\n        <svg class=\"read-gallery__icondown\" width=\"9\" height=\"14\">\n            <use href=\"${iconDownURL}#icon-down\">\n            </use>\n        </svg>\n        </span>\n        </div>\n        <hr class=\"read-gallery__divider\">\n        <ul class=\"news-list\">\n            ${newsList}\n        </ul>\n    </li>`;\n};\n// TODO: refactor function toggle (children and parent elements) because of dependency on DOM tree\ndocument.querySelector('.news-list').addEventListener('click', onBtnClick);\n\nfunction toggleDate(e) {\n    e.preventDefault();\n    const span = e.currentTarget;\n    if (span.dataset.opened === 'true') {\n        span.children[0].style.display = 'none';\n        span.children[1].style.display = 'inline';\n        span.dataset.opened = 'false';\n        span.parentElement.parentElement.children[2].style.display = 'none';\n    } else {\n        span.children[0].style.display = 'inline';\n        span.children[1].style.display = 'none';\n        span.dataset.opened = 'true';\n        span.parentElement.parentElement.children[2].style.removeProperty(\n            'display'\n        );\n    }\n};\n\nconst iconsEl = document.getElementsByClassName('read-gallery__iconswrap');\nconst iconsArr = Array.from(iconsEl);\n\niconsArr.map(galleryIcon => galleryIcon.addEventListener('click', toggleDate));\n\nfunction onError(error) {\n    console.error(error);\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8OQ7p\")).toString();","function activateNavigation(pageName) {\n    const el = document.querySelector(`.${pageName}`);\n    el.classList.add(\"active\");\n};\n\nconst bodyEl = document.querySelector(\"body\");\nconst pageName = bodyEl.dataset.name;\n\nactivateNavigation(pageName);\n\n","const Theme = {\n    LIGHT: 'light-theme',\n    DARK: 'dark-theme',\n};\n\nconst refsThemeSwitcher = {\n    body: document.querySelector('body'),\n    checkboxTheme: document.querySelector('#theme-switch-toggle'),\n};\n\nrefsThemeSwitcher.body.classList.add(Theme.LIGHT);\nrefsThemeSwitcher.checkboxTheme.addEventListener('change', onCheckboxClick);\nchangeTheme();\n\nfunction onCheckboxClick() {\n    refsThemeSwitcher.body.classList.toggle(Theme.DARK);\n    refsThemeSwitcher.body.classList.toggle(Theme.LIGHT);\n    const currentTheme = refsThemeSwitcher.body.classList.value;\n    localStorage.setItem('Theme', currentTheme);\n}\n  \nfunction changeTheme() {\n    const saveTheme = localStorage.getItem('Theme');\n    if (saveTheme === Theme.DARK) {\n        refsThemeSwitcher.checkboxTheme.checked = 'true';\n        onCheckboxClick();\n    }\n}"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$8EDGm","$e27edc6dc33d0133$exports","URL","resolve","import","meta","url","toString","$b9eba5a31eae3293$var$pageName","document","querySelector","dataset","name","pageName1","classList","add","$4533c0d6e5ef4693$var$Theme","$4533c0d6e5ef4693$var$refsThemeSwitcher","body","checkboxTheme","$4533c0d6e5ef4693$var$onCheckboxClick","toggle","currentTheme","value","localStorage","setItem","addEventListener","getItem","checked","$103c6abfc3a0e310$var$readNews","default","getRead","$103c6abfc3a0e310$var$galleryEl","$103c6abfc3a0e310$var$iconsURL","$lQVoc","normalizeImportFileName","$parcel$interopDefault","$103c6abfc3a0e310$var$formatDate","ms","date","Date","getDate","getMonth","getFullYear","$103c6abfc3a0e310$var$readNewsGroupedByDate","news","readByDate","Map","newsEntity","formattedReadDate","readdate","has","get","push","set","$103c6abfc3a0e310$var$groupByDate","$103c6abfc3a0e310$var$createMarkupForOneDate","iconupURL","iconDownURL","newsList","$eWdjI","createMarkup","abstract","snippet","title","updated","newsdate","nytdsection","sectionname","section","media","image","uri","$103c6abfc3a0e310$var$toggleDate","e","preventDefault","span","currentTarget","opened","children","style","display","parentElement","removeProperty","innerHTML","readNewsGroupedByDate1","text","markupForOneDate","$103c6abfc3a0e310$var$createMarkupForAllDates","onBtnClick","$103c6abfc3a0e310$var$iconsEl","getElementsByClassName","Array","from","map","galleryIcon"],"version":3,"file":"read.e96e292b.js.map"}