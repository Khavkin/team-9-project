!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},i=t.parcelRequire4f1d;null==i&&((i=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return a[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},t.parcelRequire4f1d=i),i.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}})),i.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),i.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),i.register("jdVyQ",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}})),i("8tk4c"),i("4P4j1");var r=i("bpxeT"),s=i("2TvXO"),c=i("4P4j1");document.querySelector(".header__search-form"),document.querySelector(".search-form__input"),document.querySelector(".search-form__button"),document.querySelector(".list-news-card"),document.querySelector(".bad-request"),document.querySelector(".weather"),document.querySelector(".list-news-card");i("4At6I");var l=[{name:"January",days:31},{name:"February",days:28},{name:"March",days:31},{name:"April",days:30},{name:"May",days:31},{name:"June",days:30},{name:"July",days:31},{name:"August",days:31},{name:"September",days:30},{name:"October",days:31},{name:"November",days:30},{name:"December",days:31}],o=new Date,u=o.getFullYear(),h=l[o.getMonth()],d=o.getDate(),p=o.getMonth(),f=u,g=new Event("setdate",{bubbles:!0}),v={calendarFild:document.querySelector(".calendar__fild"),calendarInput:document.querySelector(".calendar__input"),calendarDays:document.querySelector(".calendar__days"),calendarIconUp:document.querySelector(".calendar__icon--up"),calendarIconDown:document.querySelector(".calendar__icon--down"),calendarMonthSpan:document.getElementById("month-span"),calendarYearSpan:document.getElementById("year-span"),calendarPrevButtonMonth:document.getElementById("prev-button-month"),calendarNextButtonMonth:document.getElementById("next-button-month"),calendarPrevButtonYear:document.getElementById("prev-button-year"),calendarNextButtonYear:document.getElementById("next-button-year")};function w(){v.calendarMonthSpan.textContent=h.name,v.calendarYearSpan.textContent=u,v.calendarDays.innerHTML=m(u,h.days),document.getElementById("currentmonth-day-".concat(d)).classList.add("calendar__current-date")}function m(e,t){o.setFullYear(f,p,1);var a=o.getDay(),n="",i="";e%4==0&&28===t&&(t+=1),0===a&&(a+=7);for(var r=1;r<=t;r+=1)i+='<li class="calendar__day" id="currentmonth-day-'.concat(r,'">').concat(r,"</li>");for(var s=0;s<a-1;s+=1)n+='<li class="calendar__day calendar__day--empty"></li>';return n+i}function b(e){return String(e).padStart(2,"0")}v.calendarInput.addEventListener("focus",(function(){v.calendarFild.classList.add("focus"),v.calendarInput.classList.add("focus"),v.calendarIconUp.classList.remove("calendar-is-hidden"),v.calendarIconDown.classList.add("calendar-is-hidden")})),v.calendarDays.addEventListener("click",(function(e){if("LI"!==e.target.nodeName)return;var t=document.querySelector(".calendar__current-date");null==t||t.classList.remove("calendar__current-date"),e.target.classList.add("calendar__current-date"),v.calendarFild.classList.remove("focus"),v.calendarInput.classList.remove("focus"),v.calendarIconUp.classList.add("calendar-is-hidden"),v.calendarIconDown.classList.remove("calendar-is-hidden"),v.calendarInput.value="".concat(b(e.target.textContent),"-").concat(b(p+1),"-").concat(f),o.setFullYear(f,p,Number(e.target.textContent)),v.calendarInput.dispatchEvent(g)})),v.calendarIconUp.addEventListener("click",(function(){v.calendarFild.classList.remove("focus"),v.calendarInput.classList.remove("focus"),v.calendarIconUp.classList.add("calendar-is-hidden"),v.calendarIconDown.classList.remove("calendar-is-hidden")})),v.calendarPrevButtonMonth.addEventListener("click",(function(){p-=1,v.calendarMonthSpan.textContent=l[p].name,0===p&&(v.calendarPrevButtonMonth.disabled=!0);p<11&&(v.calendarNextButtonMonth.disabled=!1);v.calendarDays.innerHTML=m(f,l[p].days)})),v.calendarNextButtonMonth.addEventListener("click",(function(){p+=1,v.calendarMonthSpan.textContent=l[p].name,11===p&&(v.calendarNextButtonMonth.disabled=!0);p>0&&(v.calendarPrevButtonMonth.disabled=!1);v.calendarDays.innerHTML=m(f,l[p].days)})),v.calendarPrevButtonYear.addEventListener("click",(function(){f-=1,v.calendarYearSpan.textContent=f,v.calendarDays.innerHTML=m(f,l[p].days)})),v.calendarNextButtonYear.addEventListener("click",(function(){f+=1,v.calendarYearSpan.textContent=f,v.calendarDays.innerHTML=m(f,l[p].days)})),v.calendarInput.addEventListener("keyup",(function(e){"Enter"===e.key&&(v.calendarFild.classList.remove("focus"),v.calendarInput.classList.remove("focus"),v.calendarIconUp.classList.add("calendar-is-hidden"),v.calendarIconDown.classList.remove("calendar-is-hidden"),v.calendarInput.dispatchEvent(g),v.calendarInput.blur(),w())})),w();var y=i("iB7CT");i("abKF4"),i("dOFS2");c=i("4P4j1");i("dOFS2");var k=i("1RLhk"),_=(0,k.getMedia)(),M=[];(0,c.categoryOfNews)().then((function(e){M.length=0,e.forEach((function(e){M.push({section:encodeURIComponent(e.section),display_name:e.display_name})})),T=M.map((function(e){return'<li> <button type = "button" class ="categories_button display_button " data-section='.concat(e.section,">").concat(e.display_name,"</button> </li>")})),N=M.map((function(e){return'<li class = "inside_li"> <button type = "button" class ="other_but" data-section='.concat(e.section,">").concat(e.display_name,"</button> </li>")})),B()}));document.querySelectorAll("button");var L=document.querySelector(".categories_ul"),S=document.querySelector(".special"),x=document.querySelector(".special_but"),P=(document.querySelectorAll(".categories_button"),document.querySelector(".icon")),W=document.querySelector(".display_buttons");x.addEventListener("click",(function(){return}));var T="",N="";function B(){var e=(0,k.getMedia)(),t=[];2===e?t=T.slice(1,5):3===e&&(t=T.slice(1,7)),W.innerHTML="",W.insertAdjacentHTML("afterbegin",t.join(""));var a=N.slice(7,19);S.insertAdjacentHTML("afterbegin",a.join(""))}W.addEventListener("click",(function(e){return})),L.addEventListener("click",(function(e){e.preventDefault();var t=e.target,a=t.closest("button");a&&"BUTTON"===a.nodeName&&(t=a);if("BUTTON"!==t.nodeName)return;if("section"in t.dataset){t.dataset.section;if(t.classList.contains("categories_button")){var n=document.querySelector(".click-chang-bac");n&&n.classList.remove("click-chang-bac"),t.classList.toggle("click-chang-bac"),x.classList.contains("bek-for-other")&&(S.classList.toggle("is-hidden"),P.classList.toggle("icon-click"),x.classList.toggle("bek-for-other"))}if(t.classList.contains("other_but")){S.classList.toggle("is-hidden"),P.classList.toggle("icon-click"),x.classList.toggle("bek-for-other");var i=document.querySelector(".click-chang-bac");i&&i.classList.remove("click-chang-bac")}}t.classList.contains("special_but")&&(S.classList.toggle("is-hidden"),P.classList.toggle("icon-click"),x.classList.toggle("bek-for-other"))})),window.addEventListener("resize",(function(e){var t=(0,k.getMedia)();_!==t&&(B(),_=t)})),window.addEventListener("click",(function(e){null===e.target.closest(".categories_ul")&&x.classList.contains("bek-for-other")&&(S.classList.toggle("is-hidden"),P.classList.toggle("icon-click"),x.classList.toggle("bek-for-other"))}));r=i("bpxeT");var C=i("8MBJY"),I={};Object.defineProperty(I,"__esModule",{value:!0}),I.default=function(e,t){var a=E.default(e,t,"get");return O.default(e,a)};var E=q(i("1UHsN")),O=q(i("ffZzF"));function q(e){return e&&e.__esModule?e:{default:e}}var D={};Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(e,t,a){F.default(e,t),t.set(e,a)};var j,F=(j=i("5k7tO"))&&j.__esModule?j:{default:j};var H={};Object.defineProperty(H,"__esModule",{value:!0}),H.default=function(e,t,a){var n=U.default(e,t,"set");return Y.default(e,n,a),a};var U=A(i("1UHsN")),Y=A(i("jdVyQ"));function A(e){return e&&e.__esModule?e:{default:e}}var R={};Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a};var J={};Object.defineProperty(J,"__esModule",{value:!0}),J.default=function(e,t){K.default(e,t),t.add(e)};var K=function(e){return e&&e.__esModule?e:{default:e}}(i("5k7tO"));s=i("2TvXO"),C=i("8MBJY");var z=i("a2hTj"),X=i("hKHmD"),Q=i("8nrFW"),V=[4,7,8],Z=".paginator",G=[{maxCenterButtonsCount:3,buttonWidth:28,scrollCount:1,margin:4},{maxCenterButtonsCount:5,buttonWidth:33,scrollCount:1,margin:8},{maxCenterButtonsCount:5,buttonWidth:33,scrollCount:1,margin:8}],$=(k=i("1RLhk"),new WeakMap),ee=new WeakMap,te=new WeakMap,ae=new WeakMap,ne=new WeakMap,ie=new WeakMap,re=new WeakMap,se=new WeakMap,ce=new WeakMap,le=new WeakMap,oe=new WeakMap,ue=new WeakMap,he=new WeakMap,de=new WeakMap,pe=new WeakMap,fe=new WeakMap,ge=new WeakMap,ve=new WeakMap,we=new WeakSet,me=new WeakSet,be=new WeakSet,ye=new WeakSet,ke=new WeakSet,_e=new WeakSet,Me=new WeakSet,Le=new WeakSet,Se=new WeakSet,xe=new WeakSet,Pe=new WeakSet,We=function(){"use strict";function t(a){var n=a.itemsPerPage,i=a.totalItems,r=a.currentPage,s=void 0===r?1:r,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e(C)(this,t),e(J)(this,we),e(J)(this,me),e(J)(this,be),e(J)(this,ye),e(J)(this,ke),e(J)(this,_e),e(J)(this,Me),e(J)(this,Le),e(J)(this,Se),e(J)(this,xe),e(J)(this,Pe),e(D)(this,$,{writable:!0,value:5}),e(D)(this,ee,{writable:!0,value:0}),e(D)(this,te,{writable:!0,value:7}),e(D)(this,ae,{writable:!0,value:1}),e(D)(this,ne,{writable:!0,value:2}),e(D)(this,ie,{writable:!0,value:Z}),e(D)(this,re,{writable:!0,value:"".concat(e(I)(this,ie),"__carousel-wrapper")}),e(D)(this,se,{writable:!0,value:"".concat(e(I)(this,ie),"__carousel")}),e(D)(this,ce,{writable:!0,value:null}),e(D)(this,le,{writable:!0,value:null}),e(D)(this,oe,{writable:!0,value:null}),e(D)(this,ue,{writable:!0,value:0}),e(D)(this,he,{writable:!0,value:0}),e(D)(this,de,{writable:!0,value:0}),e(D)(this,pe,{writable:!0,value:33}),e(D)(this,fe,{writable:!0,value:0}),e(D)(this,ge,{writable:!0,value:8}),e(D)(this,ve,{writable:!0,value:e(Q)(G)}),e(X)(this,"onClick",null),e(H)(this,ce,document.querySelector(e(I)(this,ie))),e(I)(this,ce)?(e(I)(this,ce).addEventListener("click",this.handlerOnClick.bind(this)),c&&(e(H)(this,ve,[]),e(H)(this,ve,c),e(R)(this,Pe,Fe).call(this)),this.reCreate({itemsPerPage:n,totalItems:i,currentPage:s},c)):console.error("Selector ".concat(e(I)(this,ie)," not found"))}return e(z)(t,[{key:"render",value:function(){var t=this;if(e(I)(this,ue)<2)return e(I)(this,ce).style.display="none","";e(I)(this,ce).style.display=null;var a="";e(I)(this,ce).innerHTML="";for(var n=0;n<e(I)(this,ue);n+=1)this.buttons[n]=n+1;var i=(a=this.buttons.map((function(a,n,i){return'<li><button  class="paginator__button '.concat(n+1===t.currentPage?"paginator__button--current":"",'" type="button" data-page=').concat(a,' title= "Page ').concat(a,'">').concat(e(R)(t,_e,Ee).call(t,a)?"...":a,"</button></li>")})))[0],r=a[a.length-1],s=e(I)(this,ue)>2?'<li class="paginator__carousel-wrapper"><ul class="paginator__carousel">'.concat(a.slice(1,a.length-1).join(""),"</ul></li>"):"";a='<li><button  class="paginator__button paginator__button--prev" data-page="prev" type="button" title="Previous page">Prev</button></li>'+"".concat(i)+s+"".concat(r)+'<li><button class="paginator__button paginator__button--next" data-page="next" type="button" title="Next page">Next</button></li>',e(I)(this,ce).insertAdjacentHTML("afterbegin",a)}},{key:"handlerOnClick",value:function(t){var a=t.target;"BUTTON"===a.nodeName&&"page"in a.dataset&&e(R)(this,we,Te).call(this,a.dataset.page)}},{key:"reCreate",value:function(t){var a=t.itemsPerPage,n=t.totalItems,i=t.currentPage,r=void 0===i?1:i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];s&&(e(H)(this,ve,[]),e(H)(this,ve,e(Q)(s)),e(R)(this,Pe,Fe).call(this)),e(H)(this,fe,0),e(H)(this,ne,2),e(H)(this,he,a),e(H)(this,de,n),e(H)(this,ue,Math.ceil(e(I)(this,de)/e(I)(this,he))),this.currentPage=r>e(I)(this,ue)?e(I)(this,ue):r,e(I)(this,ue)>2&&e(H)(this,ee,e(I)(this,ue)-2>=e(I)(this,$)?e(I)(this,$):e(I)(this,ue)-2),this.buttons=[],this.render(),e(R)(this,xe,je).call(this)}}]),t}();function Te(t){switch(t){case"prev":if(1===this.currentPage)return;e(R)(this,me,Ne).call(this,this.currentPage).classList.toggle("paginator__button--current"),2===this.currentPage&&e(R)(this,Le,qe).call(this,"prev"),e(R)(this,Se,De).call(this,"next"),this.currentPage-=1;var a=e(R)(this,me,Ne).call(this,this.currentPage);if(a.classList.toggle("paginator__button--current"),e(R)(this,ke,Ie).call(this,a))break;He(a,e(I)(this,le))||e(R)(this,ye,Ce).call(this,1,e(I)(this,ae));break;case"next":if(this.currentPage===e(I)(this,ue))return void e(R)(this,Le,qe).call(this,"next");e(R)(this,me,Ne).call(this,this.currentPage).classList.toggle("paginator__button--current"),this.currentPage===e(I)(this,ue)-1&&e(R)(this,Le,qe).call(this,"next"),e(R)(this,Se,De).call(this,"prev"),this.currentPage+=1;var n=e(R)(this,me,Ne).call(this,this.currentPage);if(n.classList.toggle("paginator__button--current"),e(R)(this,ke,Ie).call(this,n))break;He(n,e(I)(this,le))||e(R)(this,ye,Ce).call(this,-1,e(I)(this,ae));break;default:if(this.currentPage===t)return;e(R)(this,me,Ne).call(this,this.currentPage).classList.toggle("paginator__button--current"),this.currentPage=+t,e(R)(this,me,Ne).call(this,this.currentPage).classList.toggle("paginator__button--current"),1===this.currentPage?(e(R)(this,Le,qe).call(this,"prev"),e(R)(this,Se,De).call(this,"next")):this.currentPage===e(I)(this,ue)?(e(R)(this,Le,qe).call(this,"next"),e(R)(this,Se,De).call(this,"prev")):(e(R)(this,Se,De).call(this,"next"),e(R)(this,Se,De).call(this,"prev")),1===this.currentPage&&0!==e(I)(this,ne)&&e(R)(this,ye,Ce).call(this,1,e(I)(this,ne)-2),this.currentPage===e(I)(this,ue)&&0!==e(I)(this,ne)&&e(R)(this,ye,Ce).call(this,-1,e(I)(this,ue)-e(I)(this,ee)-e(I)(this,ne)),e(R)(this,_e,Ee).call(this,this.currentPage)&&(this.currentPage===e(I)(this,ne)?e(R)(this,ye,Ce).call(this,1,2):e(R)(this,ye,Ce).call(this,-1,2))}this.onClick&&this.onClick(this.currentPage)}function Ne(t){return e(I)(this,ce).querySelector("[data-page='".concat(t,"']"))}function Be(){var t=e(I)(this,ue)>2?e(I)(this,ee)*e(I)(this,pe)+(e(I)(this,ee)-1)*e(I)(this,ge):0;e(I)(this,le).style.width="".concat(t,"px")}function Ce(t,a){a=t<0?e(I)(this,ne)+a+e(I)(this,ee)>e(I)(this,ue)?e(I)(this,ue)-(e(I)(this,ne)+a+e(I)(this,ee)):a:e(I)(this,ne)-a<2?1:a,e(H)(this,fe,e(I)(this,fe)+t*(e(I)(this,pe)*a+e(I)(this,ge)*a)),e(I)(this,oe).style.left="".concat(e(I)(this,fe),"px"),e(R)(this,Me,Oe).call(this,t,a)}function Ie(t){var a=t.dataset.page;return!(["prev","1","".concat(e(I)(this,ue)),"next"].indexOf(a)<0)}function Ee(t){return 2!==t&&t!==e(I)(this,ue)-1&&(t===e(I)(this,ne)||t===e(I)(this,ne)+e(I)(this,ee)-1||void 0)}function Oe(t,a){var n=e(I)(this,ne),i=e(R)(this,me,Ne).call(this,n);i.innerHTML=i.dataset.page,(i=e(R)(this,me,Ne).call(this,n+e(I)(this,ee)-1)).innerHTML=i.dataset.page,e(H)(this,ne,e(I)(this,ne)+a*-t),e(R)(this,_e,Ee).call(this,e(I)(this,ne))&&((i=e(R)(this,me,Ne).call(this,e(I)(this,ne))).innerHTML="..."),e(R)(this,_e,Ee).call(this,e(I)(this,ne)+e(I)(this,ee)-1)&&((i=e(R)(this,me,Ne).call(this,e(I)(this,ne)+e(I)(this,ee)-1)).innerHTML="...")}function qe(t){var a=e(R)(this,me,Ne).call(this,t);a&&(a.disabled=!0)}function De(t){var a=e(R)(this,me,Ne).call(this,t);a&&(a.disabled=!1)}function je(){if(e(I)(this,ue)>2){if(e(H)(this,le,document.querySelector(e(I)(this,re))),e(H)(this,oe,document.querySelector(e(I)(this,se))),!e(I)(this,le))return void console.error("Selector ".concat(e(I)(this,re)," not found"));e(R)(this,be,Be).call(this),this.currentPage>this.buttons[e(I)(this,ee)]&&this.currentPage<e(I)(this,ue)&&e(R)(this,ye,Ce).call(this,-e(I)(this,ae),this.currentPage-this.buttons[e(I)(this,ee)]+e(I)(this,ae)-1)}1===this.currentPage&&e(R)(this,Le,qe).call(this,"prev"),this.currentPage===e(I)(this,ue)&&e(R)(this,Le,qe).call(this,"next")}function Fe(){var t=e(I)(this,ve);if(t){var a=t[(0,k.getMedia)()-1];for(var n in a)switch(n){case"maxCenterButtonsCount":e(H)(this,$,a[n]);break;case"buttonWidth":e(H)(this,pe,a[n]);break;case"scrollCount":e(H)(this,ae,a[n]);break;case"margin":e(H)(this,ge,a[n])}}}function He(e,t){var a=e.getBoundingClientRect(),n=t.getBoundingClientRect();return!(Math.floor(a.right)>Math.floor(n.right)||Math.floor(a.left)<Math.floor(n.left))}r=i("bpxeT"),C=i("8MBJY"),z=i("a2hTj"),Q=i("8nrFW"),s=i("2TvXO"),c=i("4P4j1"),k=i("1RLhk");var Ue=new WeakMap,Ye=new WeakMap,Ae=new WeakMap,Re=new WeakMap,Je=new WeakMap,Ke=new WeakMap,ze=new WeakMap,Xe=function(){"use strict";function t(){e(C)(this,t),e(D)(this,Ue,{writable:!0,value:[]}),e(D)(this,Ye,{writable:!0,value:0}),e(D)(this,Ae,{writable:!0,value:1}),e(D)(this,Re,{writable:!0,value:""}),e(D)(this,Je,{writable:!0,value:""}),e(D)(this,Ke,{writable:!0,value:""}),e(D)(this,ze,{writable:!0,value:0})}return e(z)(t,[{key:"getMostPopularNews",value:function(){var t=this;return e(r)(e(s).mark((function a(){var n,i,r;return e(s).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.mostPopularNews2)();case 2:"OK"===(n=a.sent).status?(e(H)(t,Ue,[]),r=n.results.map((function(e,t){var a=e.uri,n=e.url,i=e.section,r=e.nytdsection,s=e.published_date,c=e.updated,l=e.abstract,o=e.title,u=e.media,h=(e.multimedia,{uri:a,url:n,sectionname:i,section:r,newsdate:(0,k.formatDate)(c||s),snippet:l,title:o,isfavorite:!1,isread:!1});return null===u||0===u.length?h.image="":h.image=u[0]["media-metadata"][2].url,h})),(i=e(I)(t,Ue)).push.apply(i,e(Q)(r)),e(H)(t,Ye,n.num_results)):console.error("Ошибка при получении популярных новостей (статус-".concat(n.status,")")),e(H)(t,Ae,1);case 5:case"end":return a.stop()}}),a)})))()}},{key:"getNewsByCategory",value:function(t,a,n){var i=this;return e(r)(e(s).mark((function r(){var l,o,u;return e(s).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,c.getArticleByCategory2)(t,a,n);case 3:"OK"===(l=r.sent).status&&(u=l.results.map((function(e,a){var n=e.uri,i=e.url,r=e.section,s=e.published_date,c=e.updated_date,l=e.abstract,o=e.title,u=e.multimedia,h={uri:n,url:i,sectionname:r,section:t,newsdate:(0,k.formatDate)(s||c),snippet:l,title:o,isfavorite:!1,isread:!1};return h.image=null===u?"":u[u.length-1].url,h})),0===a&&e(H)(i,Ue,[]),(o=e(I)(i,Ue)).push.apply(o,e(Q)(u)),e(H)(i,Ye,e(I)(i,Ue).length),e(H)(i,Ae,2),e(H)(i,Re,t)),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.error("Ошибка ".concat(r.t0," получения новостей по категории ").concat(t," offset=").concat(a," limit=").concat(n));case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}},{key:"getNewsBySearch",value:function(t,a,n){var i=this;return e(r)(e(s).mark((function r(){var l,o,u;return e(s).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,c.getSearchArticles2)(t,a,n);case 3:"OK"===(l=r.sent).status&&(console.dir(l.results),u=l.results.map((function(e,t){var a,n=e.uri,i=e.web_url,r=e.section_name,s=e.pub_date,c=e.abstract,l=e.headline,o=e.multimedia,u={uri:n,url:i,sectionname:r,section:r,newsdate:(0,k.formatDate)(s),snippet:c,title:null!==(a=l.main)&&void 0!==a?a:"",isfavorite:!1,isread:!1};return null===o||0===o.length?u.image="":u.image="https://www.nytimes.com/"+o[0].url,u})),0===a&&e(H)(i,Ue,[]),console.log("mapped data"),console.dir(u),(o=e(I)(i,Ue)).push.apply(o,e(Q)(u)),e(H)(i,Ye,l.num_results),e(H)(i,Ae,3),e(H)(i,Ke,t),e(H)(i,Re,""),e(H)(i,ze,a)),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.error("Ошибка ".concat(r.t0," получения новостей по запросу ").concat(t," page=").concat(a," date=").concat(n));case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}},{key:"getData",value:function(t,a){var n=this;return e(r)(e(s).mark((function i(){var r,c,l,o;return e(s).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=[],!(t+a<=e(I)(n,Ue).length||t+a>e(I)(n,Ue).length&&e(I)(n,Ue).length===n.getTotalNews())){i.next=5;break}c=""!==e(I)(n,Je)?e(I)(n,Ue).filter((function(t){return t.newsdate===e(I)(n,Je)})):e(I)(n,Ue),r=c.slice(t,t+a),i.next=17;break;case 5:if(2!==e(I)(n,Ae)){i.next=13;break}return l=n.getDataLength(),o=(0,k.calculateLimit)(t,l),i.next=10,n.getNewsByCategory(e(I)(n,Re),l,o);case 10:r=e(I)(n,Ue).slice(t,t+a),i.next=17;break;case 13:if(3!==e(I)(n,Ae)){i.next=17;break}return i.next=16,n.getNewsBySearch(e(I)(n,Ke),e(I)(n,ze)+1,e(I)(n,Je));case 16:r=e(I)(n,Ue).slice(t,t+a);case 17:return i.abrupt("return",r);case 18:case"end":return i.stop()}}),i)})))()}},{key:"getTotalNews",value:function(){var t=0;switch(e(I)(this,Ae)){case 1:case 2:t=e(I)(this,Ue).length;break;case 3:t=e(I)(this,Ye)}return t}},{key:"getDataLength",value:function(){return e(I)(this,Ue).length}},{key:"setFilter",value:function(t){console.log("set filter-",t),e(H)(this,Je,t)}}]),t}(),Qe=(r=i("bpxeT"),C=i("8MBJY"),z=i("a2hTj"),s=i("2TvXO"),i("dOFS2")),Ve=(k=i("1RLhk"),i("abKF4")),Ze=new WeakMap,Ge=new WeakMap,$e=new WeakSet,et=new WeakSet,tt=function(){"use strict";function t(){e(C)(this,t),e(J)(this,$e),e(J)(this,et),e(D)(this,Ze,{writable:!0,value:null}),e(D)(this,Ge,{writable:!0,value:[1,2,3]}),e(H)(this,Ze,document.querySelector(".list-news-card"))}return e(z)(t,[{key:"showPage",value:function(t,a,n){var i=this;return e(r)(e(s).mark((function r(){var c,l;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(0,k.getPageStartIndex)(t,a),e.next=3,n.getData(c,a);case 3:return l=e.sent,e.next=6,i.render(l);case 6:case"end":return e.stop()}}),r)})))()}},{key:"render",value:function(t){var a=this;return e(r)(e(s).mark((function n(){var i,r;return e(s).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{i=t.map((function(e,t){return(0,Qe.createMarkup2)(e)})),i=e(R)(a,et,nt).call(a,i),r=i.join(""),e(R)(a,$e,at).call(a,r),(0,Ve.geolocateUpdate)()}catch(e){console.error(e)}case 1:case"end":return n.stop()}}),n)})))()}}]),t}();function at(t){null!==e(I)(this,Ze)&&(e(I)(this,Ze).innerHTML=t)}function nt(t){var a=e(I)(this,Ge)[(0,k.getMedia)()-1]-1;return t.splice(a,0,'<li class="list-news-card__item weather"></li>'),t}C=i("8MBJY"),z=i("a2hTj");var it=new WeakMap,rt=function(){"use strict";function t(){e(C)(this,t),e(D)(this,it,{writable:!0,value:void 0}),e(H)(this,it,document.createElement("div")),e(I)(this,it).classList.add("spinner-wrap"),e(I)(this,it).classList.add("spinner-invisible"),e(I)(this,it).insertAdjacentHTML("afterbegin",'<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>'),document.body.append(e(I)(this,it))}return e(z)(t,[{key:"showSpinner",value:function(){e(I)(this,it).classList.remove("spinner-invisible")}},{key:"hideSpinner",value:function(){e(I)(this,it).classList.add("spinner-invisible")}}]),t}(),st=(k=i("1RLhk"),new WeakMap),ct=new WeakMap,lt=new WeakMap,ot=new WeakMap,ut=new WeakMap,ht=new WeakMap,dt=new WeakMap,pt=new WeakMap,ft=new WeakMap,gt=new WeakMap,vt=new WeakMap,wt=new WeakMap,mt=new WeakSet,bt=new WeakSet,yt=new WeakSet,kt=new WeakSet,_t=new WeakSet,Mt=new WeakSet,Lt=new WeakSet;function St(t){var a=t.categorySelector,n=t.searchSelector,i=t.calendarSelector;e(H)(this,ct,a),e(H)(this,lt,document.querySelector(a)),e(I)(this,lt)?(e(I)(this,lt).addEventListener("click",e(R)(this,bt,xt).bind(this)),e(H)(this,ot,n),e(H)(this,ut,document.querySelector(n)),e(I)(this,ut)?(e(I)(this,ut).addEventListener("submit",e(R)(this,yt,Wt).bind(this)),e(H)(this,pt,i),e(H)(this,ft,document.querySelector(i)),e(I)(this,ft)?(e(I)(this,ft).addEventListener("setdate",e(R)(this,kt,Nt).bind(this)),e(I)(this,ft).addEventListener("keyup",(function(e){return console.log(e)}))):console.error("Calendar element ".concat(i," not found"))):console.error("Search element ".concat(n," not found"))):console.error("Category element ".concat(a," not found"))}function xt(e){return Pt.apply(this,arguments)}function Pt(){return(Pt=e(r)(e(s).mark((function t(a){var n,i,r,c;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=V[(0,k.getMedia)()-1],e(H)(this,wt,1),i=a.target,(r=i.closest("button"))&&"BUTTON"===r.nodeName&&(i=r),"BUTTON"===i.nodeName){t.next=8;break}return t.abrupt("return");case 8:if(!("section"in i.dataset)){t.next=17;break}return c=i.dataset.section,e(I)(this,gt).showSpinner(),t.next=13,e(I)(this,st).getNewsByCategory(c,0,500);case 13:return e(I)(this,ht).reCreate({itemsPerPage:n,totalItems:e(I)(this,st).getDataLength(),currentPage:e(I)(this,wt)},G),t.next=16,e(I)(this,dt).showPage(1,n,e(I)(this,st));case 16:e(I)(this,gt).hideSpinner();case 17:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Wt(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=e(r)(e(s).mark((function t(a){var n,i;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=V[(0,k.getMedia)()-1],e(H)(this,wt,1),console.dir(a.target.elements[0]),""===(i=a.target.elements[0].value)){t.next=14;break}return e(I)(this,gt).showSpinner(),t.next=9,e(I)(this,st).getNewsBySearch(i,0,"");case 9:return console.log("getTotalNews",e(I)(this,st).getTotalNews()),e(I)(this,ht).reCreate({itemsPerPage:n,totalItems:e(I)(this,st).getTotalNews(),currentPage:e(I)(this,wt)},G),t.next=13,e(I)(this,dt).showPage(1,n,e(I)(this,st));case 13:e(I)(this,gt).hideSpinner();case 14:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Nt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=e(r)(e(s).mark((function t(a){var n;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.value,console.dir(a.target),console.log("value-",a.target.value),e(I)(this,st).setFilter(n),t.t0=console,t.next=7,e(I)(this,st).getData(0,7);case 7:t.t1=t.sent,t.t0.dir.call(t.t0,t.t1);case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Ct(e){return It.apply(this,arguments)}function It(){return(It=e(r)(e(s).mark((function t(a){var n;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=V[(0,k.getMedia)()-1],e(H)(this,wt,a),console.log(this),e(I)(this,gt).showSpinner(),t.next=6,e(I)(this,dt).showPage(a,n,e(I)(this,st));case 6:e(I)(this,gt).hideSpinner(),window.scrollTo({top:0,left:0,behavior:"smooth"});case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Et(){return Ot.apply(this,arguments)}function Ot(){return(Ot=e(r)(e(s).mark((function t(){var a;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=V[(0,k.getMedia)()-1],e(I)(this,gt).showSpinner(),t.next=4,e(I)(this,st).getMostPopularNews();case 4:return console.log(e(I)(this,st).getTotalNews()),window.addEventListener("resize",e(R)(this,Lt,qt).bind(this)),e(H)(this,ht,new We({itemsPerPage:a,totalItems:e(I)(this,st).getTotalNews(),currentPage:1},G)),e(I)(this,ht).onClick=e(R)(this,_t,Ct).bind(this),t.next=10,e(I)(this,dt).showPage(1,a,e(I)(this,st));case 10:e(I)(this,gt).hideSpinner();case 11:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function qt(){return Dt.apply(this,arguments)}function Dt(){return(Dt=e(r)(e(s).mark((function t(){var a,n,i,r;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(0,k.getMedia)(),e(I)(this,vt)===a){t.next=11;break}return n=V[e(I)(this,vt)-1],i=(0,k.getPageStartIndex)(e(I)(this,wt),n),n=V[a-1],r=Math.floor(i/n)+1,console.log(i,r,n,a),t.next=9,e(I)(this,dt).showPage(r,n,e(I)(this,st));case 9:e(I)(this,ht).reCreate({currentPage:r,itemsPerPage:n,totalItems:e(I)(this,st).getTotalNews()},G),e(H)(this,vt,a);case 11:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}new function t(a){"use strict";var n=a.categorySelector,i=a.searchSelector,r=a.calendarSelector;e(C)(this,t),e(J)(this,mt),e(J)(this,bt),e(J)(this,yt),e(J)(this,kt),e(J)(this,_t),e(J)(this,Mt),e(J)(this,Lt),e(D)(this,st,{writable:!0,value:null}),e(D)(this,ct,{writable:!0,value:""}),e(D)(this,lt,{writable:!0,value:null}),e(D)(this,ot,{writable:!0,value:""}),e(D)(this,ut,{writable:!0,value:null}),e(D)(this,ht,{writable:!0,value:null}),e(D)(this,dt,{writable:!0,value:null}),e(D)(this,pt,{writable:!0,value:""}),e(D)(this,ft,{writable:!0,value:null}),e(D)(this,gt,{writable:!0,value:null}),e(D)(this,vt,{writable:!0,value:(0,k.getMedia)()}),e(D)(this,wt,{writable:!0,value:1}),e(R)(this,mt,St).call(this,{categorySelector:n,searchSelector:i,calendarSelector:r}),e(H)(this,st,new Xe),e(H)(this,dt,new tt),e(H)(this,gt,new rt),e(R)(this,Mt,Et).call(this)}({categorySelector:".categories_ul",searchSelector:".header__search-form",calendarSelector:".calendar__input"});new(0,y.default)("team-9-project")}();
//# sourceMappingURL=index.99b9565c.js.map
