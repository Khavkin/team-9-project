function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},s={},i=e.parcelRequire4f1d;null==i&&((i=function(t){if(t in a)return a[t].exports;if(t in s){var e=s[t];delete s[t];var i={id:t,exports:{}};return a[t]=i,e.call(i.exports,i,i.exports),i.exports}var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){s[t]=e},e.parcelRequire4f1d=i),i.register("fExtF",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e,a){if(!e.has(t))throw new TypeError("attempted to "+a+" private field on non-instance");return e.get(t)}})),i.register("iaRLo",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){return e.get?e.get.call(t):e.value}})),i.register("7K24o",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),i.register("3LGG3",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e,a){if(e.set)e.set.call(t,a);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=a}}}));const n=document.querySelector("body").dataset.name;var r;r=n,document.querySelector(`.${r}`).classList.add("active"),i("7xP6g");var l=i("7xP6g");const c={form:document.querySelector(".header__search-form"),input:document.querySelector(".search-form__input"),button:document.querySelector(".search-form__button"),newsList:document.querySelector(".list-news-card"),badRequaest:document.querySelector(".bad-request"),wether:document.querySelector(".weather"),newsBox:document.querySelector(".list-news-card")},{form:o,input:h,button:u,newsList:d,badRequaest:g,wether:p,newsBox:w}=c;const f="light-theme",m="dark-theme",b={body:document.querySelector("body"),checkboxTheme:document.querySelector("#theme-switch-toggle")};function v(){b.body.classList.toggle(m),b.body.classList.toggle(f);const t=b.body.classList.value;localStorage.setItem("Theme",t)}b.body.classList.add(f),b.checkboxTheme.addEventListener("change",v),localStorage.getItem("Theme")===m&&(b.checkboxTheme.checked="true",v());const y=[{name:"January",days:31},{name:"February",days:28},{name:"March",days:31},{name:"April",days:30},{name:"May",days:31},{name:"June",days:30},{name:"July",days:31},{name:"August",days:31},{name:"September",days:30},{name:"October",days:31},{name:"November",days:30},{name:"December",days:31}],_=new Date,k=_.getFullYear(),M=y[_.getMonth()],L=_.getDate();let S=_.getMonth(),P=k,W=null;const x=new Event("setdate",{bubbles:!0}),T={calendarFild:document.querySelector(".calendar__fild"),calendarInput:document.querySelector(".calendar__input"),calendarDays:document.querySelector(".calendar__days"),calendarIconUp:document.querySelector(".calendar__icon--up"),calendarIconDown:document.querySelector(".calendar__icon--down"),calendarMonthSpan:document.getElementById("month-span"),calendarYearSpan:document.getElementById("year-span"),calendarPrevButtonMonth:document.getElementById("prev-button-month"),calendarNextButtonMonth:document.getElementById("next-button-month"),calendarPrevButtonYear:document.getElementById("prev-button-year"),calendarNextButtonYear:document.getElementById("next-button-year")};function I(){T.calendarMonthSpan.textContent=M.name,T.calendarYearSpan.textContent=k,T.calendarDays.innerHTML=E(k,M.days);document.getElementById(`currentmonth-day-${L}`).classList.add("calendar__current-date")}function E(t,e){_.setFullYear(P,S,1);let a=_.getDay(),s="",i="";t%4==0&&28===e&&(e+=1),0===a&&(a+=7);for(let t=1;t<=e;t+=1)i+=`<li class="calendar__day" id="currentmonth-day-${t}">${t}</li>`;for(let t=0;t<a-1;t+=1)s+='<li class="calendar__day calendar__day--empty"></li>';return s+i}function C(t){return String(t).padStart(2,"0")}T.calendarInput.addEventListener("focus",(function(){T.calendarFild.classList.add("focus"),T.calendarInput.classList.add("focus"),T.calendarIconUp.classList.remove("calendar-is-hidden"),T.calendarIconDown.classList.add("calendar-is-hidden")})),T.calendarDays.addEventListener("click",(function(t){if("LI"!==t.target.nodeName)return;document.querySelector(".calendar__current-date")?.classList.remove("calendar__current-date"),t.target.classList.add("calendar__current-date"),T.calendarFild.classList.remove("focus"),T.calendarInput.classList.remove("focus"),T.calendarIconUp.classList.add("calendar-is-hidden"),T.calendarIconDown.classList.remove("calendar-is-hidden"),T.calendarInput.value=`${C(t.target.textContent)}-${C(S+1)}-${P}`,W=_.setFullYear(P,S,Number(t.target.textContent)),T.calendarInput.dispatchEvent(x)})),T.calendarIconUp.addEventListener("click",(function(){T.calendarFild.classList.remove("focus"),T.calendarInput.classList.remove("focus"),T.calendarIconUp.classList.add("calendar-is-hidden"),T.calendarIconDown.classList.remove("calendar-is-hidden")})),T.calendarPrevButtonMonth.addEventListener("click",(function(){S-=1,T.calendarMonthSpan.textContent=y[S].name,0===S&&(T.calendarPrevButtonMonth.disabled=!0);S<11&&(T.calendarNextButtonMonth.disabled=!1);T.calendarDays.innerHTML=E(P,y[S].days)})),T.calendarNextButtonMonth.addEventListener("click",(function(){S+=1,T.calendarMonthSpan.textContent=y[S].name,11===S&&(T.calendarNextButtonMonth.disabled=!0);S>0&&(T.calendarPrevButtonMonth.disabled=!1);T.calendarDays.innerHTML=E(P,y[S].days)})),T.calendarPrevButtonYear.addEventListener("click",(function(){P-=1,T.calendarYearSpan.textContent=P,T.calendarDays.innerHTML=E(P,y[S].days)})),T.calendarNextButtonYear.addEventListener("click",(function(){P+=1,T.calendarYearSpan.textContent=P,T.calendarDays.innerHTML=E(P,y[S].days)})),T.calendarInput.addEventListener("keyup",(function(t){const{key:e}=t;"Enter"===e&&(T.calendarFild.classList.remove("focus"),T.calendarInput.classList.remove("focus"),T.calendarIconUp.classList.add("calendar-is-hidden"),T.calendarIconDown.classList.remove("calendar-is-hidden"),T.calendarInput.dispatchEvent(x),T.calendarInput.blur(),I())})),I();var N=i("8EDGm");i("3gSZX"),i("eWdjI");l=i("7xP6g");i("eWdjI");var q=i("lQVoc");let B=(0,q.getMedia)();const $=[];(0,l.categoryOfNews)().then((t=>{$.length=0,t.forEach((t=>{$.push({section:encodeURIComponent(t.section),display_name:t.display_name})})),U=$.map((t=>`<li> <button type = "button" class ="categories_button display_button " data-section=${t.section}>${t.display_name}</button> </li>`)),Y=$.map((t=>`<li class = "inside_li"> <button type = "button" class ="other_but" data-section=${t.section}>${t.display_name}</button> </li>`)),A()}));document.querySelectorAll("button");const D=document.querySelector(".categories_ul"),O=document.querySelector(".special"),j=document.querySelector(".special_but"),H=(document.querySelectorAll(".categories_button"),document.querySelector(".icon")),F=document.querySelector(".display_buttons");j.addEventListener("click",(function(){return}));let U="",Y="";function A(){const t=(0,q.getMedia)();let e=[];2===t?e=U.slice(1,5):3===t&&(e=U.slice(1,7)),F.innerHTML="",F.insertAdjacentHTML("afterbegin",e.join(""));const a=Y.slice(7,19);O.insertAdjacentHTML("afterbegin",a.join(""))}F.addEventListener("click",(function(t){return})),D.addEventListener("click",(function(t){t.preventDefault();let e=t.target;const a=e.closest("button");a&&"BUTTON"===a.nodeName&&(e=a);if("BUTTON"!==e.nodeName)return;if("section"in e.dataset){e.dataset.section;if(e.classList.contains("categories_button")){const t=document.querySelector(".click-chang-bac");t&&t.classList.remove("click-chang-bac"),e.classList.toggle("click-chang-bac"),j.classList.contains("bek-for-other")&&(O.classList.toggle("is-hidden"),H.classList.toggle("icon-click"),j.classList.toggle("bek-for-other"))}if(e.classList.contains("other_but")){O.classList.toggle("is-hidden"),H.classList.toggle("icon-click"),j.classList.toggle("bek-for-other");const t=document.querySelector(".click-chang-bac");t&&t.classList.remove("click-chang-bac")}}e.classList.contains("special_but")&&(O.classList.toggle("is-hidden"),H.classList.toggle("icon-click"),j.classList.toggle("bek-for-other"))})),window.addEventListener("resize",(function(t){const e=(0,q.getMedia)();B!==e&&(A(),B=e)})),window.addEventListener("click",(function(t){null===t.target.closest(".categories_ul")&&j.classList.contains("bek-for-other")&&(O.classList.toggle("is-hidden"),H.classList.toggle("icon-click"),j.classList.toggle("bek-for-other"))}));var R={};Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(t,e){var a=K.default(t,e,"get");return G.default(t,a)};var K=Q(i("fExtF")),G=Q(i("iaRLo"));function Q(t){return t&&t.__esModule?t:{default:t}}var V={};Object.defineProperty(V,"__esModule",{value:!0}),V.default=function(t,e,a){z.default(t,e),e.set(t,a)};var J,z=(J=i("7K24o"))&&J.__esModule?J:{default:J};var X={};Object.defineProperty(X,"__esModule",{value:!0}),X.default=function(t,e,a){var s=Z.default(t,e,"set");return tt.default(t,s,a),a};var Z=et(i("fExtF")),tt=et(i("3LGG3"));function et(t){return t&&t.__esModule?t:{default:t}}var at={};Object.defineProperty(at,"__esModule",{value:!0}),at.default=function(t,e,a){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return a};var st={};Object.defineProperty(st,"__esModule",{value:!0}),st.default=function(t,e){it.default(t,e),e.add(t)};var it=function(t){return t&&t.__esModule?t:{default:t}}(i("7K24o"));var nt=i("iJYdK");const rt=[4,7,8],lt=[{maxCenterButtonsCount:3,buttonWidth:28,scrollCount:1,margin:4},{maxCenterButtonsCount:5,buttonWidth:33,scrollCount:1,margin:8},{maxCenterButtonsCount:5,buttonWidth:33,scrollCount:1,margin:8}];q=i("lQVoc");var ct=new WeakMap,ot=new WeakMap,ht=new WeakMap,ut=new WeakMap,dt=new WeakMap,gt=new WeakMap,pt=new WeakMap,wt=new WeakMap,ft=new WeakMap,mt=new WeakMap,bt=new WeakMap,vt=new WeakMap,yt=new WeakMap,_t=new WeakMap,kt=new WeakMap,Mt=new WeakMap,Lt=new WeakMap,St=new WeakMap,Pt=new WeakSet,Wt=new WeakSet,xt=new WeakSet,Tt=new WeakSet,It=new WeakSet,Et=new WeakSet,Ct=new WeakSet,Nt=new WeakSet,qt=new WeakSet,Bt=new WeakSet,$t=new WeakSet;class Dt{render(){if(t(R)(this,vt)<2)return t(R)(this,ft).style.display="none","";t(R)(this,ft).style.display=null;let e="";t(R)(this,ft).innerHTML="";for(let e=0;e<t(R)(this,vt);e+=1)this.buttons[e]=e+1;e=this.buttons.map(((e,a,s)=>`<li><button  class="paginator__button ${a+1===this.currentPage?"paginator__button--current":""}" type="button" data-page=${e} title= "Page ${e}">${t(at)(this,Et,Yt).call(this,e)?"...":e}</button></li>`));const a=e[0],s=e[e.length-1],i=t(R)(this,vt)>2?`<li class="paginator__carousel-wrapper"><ul class="paginator__carousel">${e.slice(1,e.length-1).join("")}</ul></li>`:"";e=`<li><button  class="paginator__button paginator__button--prev" data-page="prev" type="button" title="Previous page">Prev</button></li>${a}`+i+`${s}<li><button class="paginator__button paginator__button--next" data-page="next" type="button" title="Next page">Next</button></li>`,t(R)(this,ft).insertAdjacentHTML("afterbegin",e)}handlerOnClick(e){const a=e.target;"BUTTON"===a.nodeName&&"page"in a.dataset&&t(at)(this,Pt,Ot).call(this,a.dataset.page)}reCreate({itemsPerPage:e,totalItems:a,currentPage:s=1},i=[]){i&&(t(X)(this,St,[]),t(X)(this,St,[...i]),t(at)(this,$t,Qt).call(this)),t(X)(this,Mt,0),t(X)(this,dt,2),t(X)(this,yt,e),t(X)(this,_t,a),t(X)(this,vt,Math.ceil(t(R)(this,_t)/t(R)(this,yt))),this.currentPage=s>t(R)(this,vt)?t(R)(this,vt):s,t(R)(this,vt)>2&&t(X)(this,ot,t(R)(this,vt)-2>=t(R)(this,ct)?t(R)(this,ct):t(R)(this,vt)-2),this.buttons=[],this.render(),t(at)(this,Bt,Gt).call(this)}constructor({itemsPerPage:e,totalItems:a,currentPage:s=1},i=[]){t(st)(this,Pt),t(st)(this,Wt),t(st)(this,xt),t(st)(this,Tt),t(st)(this,It),t(st)(this,Et),t(st)(this,Ct),t(st)(this,Nt),t(st)(this,qt),t(st)(this,Bt),t(st)(this,$t),t(V)(this,ct,{writable:!0,value:5}),t(V)(this,ot,{writable:!0,value:0}),t(V)(this,ht,{writable:!0,value:7}),t(V)(this,ut,{writable:!0,value:1}),t(V)(this,dt,{writable:!0,value:2}),t(V)(this,gt,{writable:!0,value:".paginator"}),t(V)(this,pt,{writable:!0,value:`${t(R)(this,gt)}__carousel-wrapper`}),t(V)(this,wt,{writable:!0,value:`${t(R)(this,gt)}__carousel`}),t(V)(this,ft,{writable:!0,value:null}),t(V)(this,mt,{writable:!0,value:null}),t(V)(this,bt,{writable:!0,value:null}),t(V)(this,vt,{writable:!0,value:0}),t(V)(this,yt,{writable:!0,value:0}),t(V)(this,_t,{writable:!0,value:0}),t(V)(this,kt,{writable:!0,value:33}),t(V)(this,Mt,{writable:!0,value:0}),t(V)(this,Lt,{writable:!0,value:8}),t(V)(this,St,{writable:!0,value:[...lt]}),t(nt)(this,"onClick",null),t(X)(this,ft,document.querySelector(t(R)(this,gt))),t(R)(this,ft)?(t(R)(this,ft).addEventListener("click",this.handlerOnClick.bind(this)),i&&(t(X)(this,St,[]),t(X)(this,St,i),t(at)(this,$t,Qt).call(this)),this.reCreate({itemsPerPage:e,totalItems:a,currentPage:s},i)):console.error(`Selector ${t(R)(this,gt)} not found`)}}function Ot(e){switch(e){case"prev":if(1===this.currentPage)return;{t(at)(this,Wt,jt).call(this,this.currentPage).classList.toggle("paginator__button--current"),2===this.currentPage&&t(at)(this,Nt,Rt).call(this,"prev"),t(at)(this,qt,Kt).call(this,"next"),this.currentPage-=1;const e=t(at)(this,Wt,jt).call(this,this.currentPage);if(e.classList.toggle("paginator__button--current"),t(at)(this,It,Ut).call(this,e))break;Vt(e,t(R)(this,mt))||t(at)(this,Tt,Ft).call(this,1,t(R)(this,ut))}break;case"next":if(this.currentPage===t(R)(this,vt))return void t(at)(this,Nt,Rt).call(this,"next");{t(at)(this,Wt,jt).call(this,this.currentPage).classList.toggle("paginator__button--current"),this.currentPage===t(R)(this,vt)-1&&t(at)(this,Nt,Rt).call(this,"next"),t(at)(this,qt,Kt).call(this,"prev"),this.currentPage+=1;const e=t(at)(this,Wt,jt).call(this,this.currentPage);if(e.classList.toggle("paginator__button--current"),t(at)(this,It,Ut).call(this,e))break;Vt(e,t(R)(this,mt))||t(at)(this,Tt,Ft).call(this,-1,t(R)(this,ut))}break;default:if(this.currentPage===e)return;t(at)(this,Wt,jt).call(this,this.currentPage).classList.toggle("paginator__button--current"),this.currentPage=+e;t(at)(this,Wt,jt).call(this,this.currentPage).classList.toggle("paginator__button--current"),1===this.currentPage?(t(at)(this,Nt,Rt).call(this,"prev"),t(at)(this,qt,Kt).call(this,"next")):this.currentPage===t(R)(this,vt)?(t(at)(this,Nt,Rt).call(this,"next"),t(at)(this,qt,Kt).call(this,"prev")):(t(at)(this,qt,Kt).call(this,"next"),t(at)(this,qt,Kt).call(this,"prev")),1===this.currentPage&&0!==t(R)(this,dt)&&t(at)(this,Tt,Ft).call(this,1,t(R)(this,dt)-2),this.currentPage===t(R)(this,vt)&&0!==t(R)(this,dt)&&t(at)(this,Tt,Ft).call(this,-1,t(R)(this,vt)-t(R)(this,ot)-t(R)(this,dt)),t(at)(this,Et,Yt).call(this,this.currentPage)&&(this.currentPage===t(R)(this,dt)?t(at)(this,Tt,Ft).call(this,1,2):t(at)(this,Tt,Ft).call(this,-1,2))}this.onClick&&this.onClick(this.currentPage)}function jt(e){return t(R)(this,ft).querySelector(`[data-page='${e}']`)}function Ht(){const e=t(R)(this,vt)>2?t(R)(this,ot)*t(R)(this,kt)+(t(R)(this,ot)-1)*t(R)(this,Lt):0;t(R)(this,mt).style.width=`${e}px`}function Ft(e,a){a=e<0?t(R)(this,dt)+a+t(R)(this,ot)>t(R)(this,vt)?t(R)(this,vt)-(t(R)(this,dt)+a+t(R)(this,ot)):a:t(R)(this,dt)-a<2?1:a,t(X)(this,Mt,t(R)(this,Mt)+e*(t(R)(this,kt)*a+t(R)(this,Lt)*a)),t(R)(this,bt).style.left=`${t(R)(this,Mt)}px`,t(at)(this,Ct,At).call(this,e,a)}function Ut(e){const a=e.dataset.page;return!(["prev","1",`${t(R)(this,vt)}`,"next"].indexOf(a)<0)}function Yt(e){return 2!==e&&e!==t(R)(this,vt)-1&&(e===t(R)(this,dt)||e===t(R)(this,dt)+t(R)(this,ot)-1||void 0)}function At(e,a){const s=t(R)(this,dt);let i=t(at)(this,Wt,jt).call(this,s);i.innerHTML=i.dataset.page,i=t(at)(this,Wt,jt).call(this,s+t(R)(this,ot)-1),i.innerHTML=i.dataset.page,t(X)(this,dt,t(R)(this,dt)+a*-e),t(at)(this,Et,Yt).call(this,t(R)(this,dt))&&(i=t(at)(this,Wt,jt).call(this,t(R)(this,dt)),i.innerHTML="..."),t(at)(this,Et,Yt).call(this,t(R)(this,dt)+t(R)(this,ot)-1)&&(i=t(at)(this,Wt,jt).call(this,t(R)(this,dt)+t(R)(this,ot)-1),i.innerHTML="...")}function Rt(e){const a=t(at)(this,Wt,jt).call(this,e);a&&(a.disabled=!0)}function Kt(e){const a=t(at)(this,Wt,jt).call(this,e);a&&(a.disabled=!1)}function Gt(){if(t(R)(this,vt)>2){if(t(X)(this,mt,document.querySelector(t(R)(this,pt))),t(X)(this,bt,document.querySelector(t(R)(this,wt))),!t(R)(this,mt))return void console.error(`Selector ${t(R)(this,pt)} not found`);t(at)(this,xt,Ht).call(this),this.currentPage>this.buttons[t(R)(this,ot)]&&this.currentPage<t(R)(this,vt)&&t(at)(this,Tt,Ft).call(this,-t(R)(this,ut),this.currentPage-this.buttons[t(R)(this,ot)]+t(R)(this,ut)-1)}1===this.currentPage&&t(at)(this,Nt,Rt).call(this,"prev"),this.currentPage===t(R)(this,vt)&&t(at)(this,Nt,Rt).call(this,"next")}function Qt(){const e=t(R)(this,St);if(e){const a=e[(0,q.getMedia)()-1];for(let e in a)switch(e){case"maxCenterButtonsCount":t(X)(this,ct,a[e]);break;case"buttonWidth":t(X)(this,kt,a[e]);break;case"scrollCount":t(X)(this,ut,a[e]);break;case"margin":t(X)(this,Lt,a[e])}}}function Vt(t,e){const a=t.getBoundingClientRect(),s=e.getBoundingClientRect();return!(Math.floor(a.right)>Math.floor(s.right)||Math.floor(a.left)<Math.floor(s.left))}l=i("7xP6g"),q=i("lQVoc");var Jt=new WeakMap,zt=new WeakMap,Xt=new WeakMap,Zt=new WeakMap,te=new WeakMap,ee=new WeakMap,ae=new WeakMap;class se{async getMostPopularNews(){const e=await(0,l.mostPopularNews2)();if("OK"===e.status){t(X)(this,Jt,[]);const a=e.results.map((({uri:t,url:e,section:a,nytdsection:s,published_date:i,updated:n,abstract:r,title:l,media:c,multimedia:o},h)=>{const u={uri:t,url:e,sectionname:a,section:s,newsdate:(0,q.formatDate)(n||i),snippet:r,title:l,isfavorite:!1,isread:!1};return null===c||0===c.length?u.image="":u.image=c[0]["media-metadata"][2].url,u}));t(R)(this,Jt).push(...a),t(X)(this,zt,e.num_results)}else console.error(`Ошибка при получении популярных новостей (статус-${e.status})`);t(X)(this,Xt,1)}async getNewsByCategory(e,a,s){try{const i=await(0,l.getArticleByCategory2)(e,a,s);if("OK"===i.status){const s=i.results.map((({uri:t,url:a,section:s,published_date:i,updated_date:n,abstract:r,title:l,multimedia:c},o)=>{const h={uri:t,url:a,sectionname:s,section:e,newsdate:(0,q.formatDate)(i||n),snippet:r,title:l,isfavorite:!1,isread:!1};return h.image=null===c?"":c[c.length-1].url,h}));0===a&&t(X)(this,Jt,[]),t(R)(this,Jt).push(...s),t(X)(this,zt,t(R)(this,Jt).length),t(X)(this,Xt,2),t(X)(this,Zt,e)}}catch(t){console.error(`Ошибка ${t} получения новостей по категории ${e} offset=${a} limit=${s}`)}}async getNewsBySearch(e,a,s){try{const i=await(0,l.getSearchArticles2)(e,a,s);if("OK"===i.status){console.dir(i.results);const s=i.results.map((({uri:t,web_url:e,section_name:a,pub_date:s,abstract:i,headline:n,multimedia:r},l)=>{const c={uri:t,url:e,sectionname:a,section:a,newsdate:(0,q.formatDate)(s),snippet:i,title:n.main??"",isfavorite:!1,isread:!1};return null===r||0===r.length?c.image="":c.image="https://www.nytimes.com/"+r[0].url,c}));0===a&&t(X)(this,Jt,[]),console.log("mapped data"),console.dir(s),t(R)(this,Jt).push(...s),t(X)(this,zt,i.num_results),t(X)(this,Xt,3),t(X)(this,ee,e),t(X)(this,Zt,""),t(X)(this,ae,a)}}catch(t){console.error(`Ошибка ${t} получения новостей по запросу ${e} page=${a} date=${s}`)}}async getData(e,a){let s=[];if(e+a<=t(R)(this,Jt).length||e+a>t(R)(this,Jt).length&&t(R)(this,Jt).length===this.getTotalNews()){s=(""!==t(R)(this,te)?t(R)(this,Jt).filter((({newsdate:e})=>e===t(R)(this,te))):t(R)(this,Jt)).slice(e,e+a)}else if(2===t(R)(this,Xt)){const i=this.getDataLength(),n=(0,q.calculateLimit)(e,i);await this.getNewsByCategory(t(R)(this,Zt),i,n),s=t(R)(this,Jt).slice(e,e+a)}else 3===t(R)(this,Xt)&&(await this.getNewsBySearch(t(R)(this,ee),t(R)(this,ae)+1,t(R)(this,te)),s=t(R)(this,Jt).slice(e,e+a));return s}getTotalNews(){let e=0;switch(t(R)(this,Xt)){case 1:case 2:e=t(R)(this,Jt).length;break;case 3:e=t(R)(this,zt)}return e}getDataLength(){return t(R)(this,Jt).length}setFilter(e){console.log("set filter-",e),t(X)(this,te,e)}constructor(){t(V)(this,Jt,{writable:!0,value:[]}),t(V)(this,zt,{writable:!0,value:0}),t(V)(this,Xt,{writable:!0,value:1}),t(V)(this,Zt,{writable:!0,value:""}),t(V)(this,te,{writable:!0,value:""}),t(V)(this,ee,{writable:!0,value:""}),t(V)(this,ae,{writable:!0,value:0})}}var ie=i("eWdjI"),ne=(q=i("lQVoc"),i("3gSZX")),re=new WeakMap,le=new WeakMap,ce=new WeakSet,oe=new WeakSet;class he{async showPage(t,e,a){const s=(0,q.getPageStartIndex)(t,e),i=await a.getData(s,e);await this.render(i)}async render(e){try{let a=e.map(((t,e)=>(0,ie.createMarkup2)(t)));a=t(at)(this,oe,de).call(this,a);const s=a.join("");t(at)(this,ce,ue).call(this,s),(0,ne.geolocateUpdate)()}catch(t){console.error(t)}}constructor(){t(st)(this,ce),t(st)(this,oe),t(V)(this,re,{writable:!0,value:null}),t(V)(this,le,{writable:!0,value:[1,2,3]}),t(X)(this,re,document.querySelector(".list-news-card"))}}function ue(e){null!==t(R)(this,re)&&(t(R)(this,re).innerHTML=e)}function de(e){const a=t(R)(this,le)[(0,q.getMedia)()-1]-1;return e.splice(a,0,'<li class="list-news-card__item weather"></li>'),e}var ge=new WeakMap;class pe{showSpinner(){t(R)(this,ge).classList.remove("spinner-invisible")}hideSpinner(){t(R)(this,ge).classList.add("spinner-invisible")}constructor(){t(V)(this,ge,{writable:!0,value:void 0}),t(X)(this,ge,document.createElement("div")),t(R)(this,ge).classList.add("spinner-wrap"),t(R)(this,ge).classList.add("spinner-invisible"),t(R)(this,ge).insertAdjacentHTML("afterbegin",'<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>'),document.body.append(t(R)(this,ge))}}q=i("lQVoc");var we=new WeakMap,fe=new WeakMap,me=new WeakMap,be=new WeakMap,ve=new WeakMap,ye=new WeakMap,_e=new WeakMap,ke=new WeakMap,Me=new WeakMap,Le=new WeakMap,Se=new WeakMap,Pe=new WeakMap,We=new WeakSet,xe=new WeakSet,Te=new WeakSet,Ie=new WeakSet,Ee=new WeakSet,Ce=new WeakSet,Ne=new WeakSet;function qe({categorySelector:e,searchSelector:a,calendarSelector:s}){t(X)(this,fe,e),t(X)(this,me,document.querySelector(e)),t(R)(this,me)?(t(R)(this,me).addEventListener("click",t(at)(this,xe,Be).bind(this)),t(X)(this,be,a),t(X)(this,ve,document.querySelector(a)),t(R)(this,ve)?(t(R)(this,ve).addEventListener("submit",t(at)(this,Te,$e).bind(this)),t(X)(this,ke,s),t(X)(this,Me,document.querySelector(s)),t(R)(this,Me)?(t(R)(this,Me).addEventListener("setdate",t(at)(this,Ie,De).bind(this)),t(R)(this,Me).addEventListener("keyup",(t=>console.log(t)))):console.error(`Calendar element ${s} not found`)):console.error(`Search element ${a} not found`)):console.error(`Category element ${e} not found`)}async function Be(e){e.preventDefault();const a=rt[(0,q.getMedia)()-1];t(X)(this,Pe,1);let s=e.target;const i=s.closest("button");if(i&&"BUTTON"===i.nodeName&&(s=i),"BUTTON"===s.nodeName&&"section"in s.dataset){const e=s.dataset.section;t(R)(this,Le).showSpinner(),await t(R)(this,we).getNewsByCategory(e,0,500),t(R)(this,ye).reCreate({itemsPerPage:a,totalItems:t(R)(this,we).getDataLength(),currentPage:t(R)(this,Pe)},lt),await t(R)(this,_e).showPage(1,a,t(R)(this,we)),t(R)(this,Le).hideSpinner()}}async function $e(e){e.preventDefault();const a=rt[(0,q.getMedia)()-1];t(X)(this,Pe,1),console.dir(e.target.elements[0]);const s=e.target.elements[0].value;""!==s&&(t(R)(this,Le).showSpinner(),await t(R)(this,we).getNewsBySearch(s,0,""),console.log("getTotalNews",t(R)(this,we).getTotalNews()),t(R)(this,ye).reCreate({itemsPerPage:a,totalItems:t(R)(this,we).getTotalNews(),currentPage:t(R)(this,Pe)},lt),await t(R)(this,_e).showPage(1,a,t(R)(this,we)),t(R)(this,Le).hideSpinner())}async function De(e){const a=e.target.value;console.dir(e.target),console.log("value-",e.target.value),t(R)(this,we).setFilter(a),console.dir(await t(R)(this,we).getData(0,7))}async function Oe(e){const a=rt[(0,q.getMedia)()-1];t(X)(this,Pe,e),console.log(this),t(R)(this,Le).showSpinner(),await t(R)(this,_e).showPage(e,a,t(R)(this,we)),t(R)(this,Le).hideSpinner(),window.scrollTo({top:0,left:0,behavior:"smooth"})}async function je(){const e=rt[(0,q.getMedia)()-1];t(R)(this,Le).showSpinner(),await t(R)(this,we).getMostPopularNews(),console.log(t(R)(this,we).getTotalNews()),window.addEventListener("resize",t(at)(this,Ne,He).bind(this)),t(X)(this,ye,new Dt({itemsPerPage:e,totalItems:t(R)(this,we).getTotalNews(),currentPage:1},lt)),t(R)(this,ye).onClick=t(at)(this,Ee,Oe).bind(this),await t(R)(this,_e).showPage(1,e,t(R)(this,we)),t(R)(this,Le).hideSpinner()}async function He(){const e=(0,q.getMedia)();if(t(R)(this,Se)!==e){let a=rt[t(R)(this,Se)-1];const s=(0,q.getPageStartIndex)(t(R)(this,Pe),a);a=rt[e-1];const i=Math.floor(s/a)+1;console.log(s,i,a,e),await t(R)(this,_e).showPage(i,a,t(R)(this,we)),t(R)(this,ye).reCreate({currentPage:i,itemsPerPage:a,totalItems:t(R)(this,we).getTotalNews()},lt),t(X)(this,Se,e)}}new class{constructor({categorySelector:e,searchSelector:a,calendarSelector:s}){t(st)(this,We),t(st)(this,xe),t(st)(this,Te),t(st)(this,Ie),t(st)(this,Ee),t(st)(this,Ce),t(st)(this,Ne),t(V)(this,we,{writable:!0,value:null}),t(V)(this,fe,{writable:!0,value:""}),t(V)(this,me,{writable:!0,value:null}),t(V)(this,be,{writable:!0,value:""}),t(V)(this,ve,{writable:!0,value:null}),t(V)(this,ye,{writable:!0,value:null}),t(V)(this,_e,{writable:!0,value:null}),t(V)(this,ke,{writable:!0,value:""}),t(V)(this,Me,{writable:!0,value:null}),t(V)(this,Le,{writable:!0,value:null}),t(V)(this,Se,{writable:!0,value:(0,q.getMedia)()}),t(V)(this,Pe,{writable:!0,value:1}),t(at)(this,We,qe).call(this,{categorySelector:e,searchSelector:a,calendarSelector:s}),t(X)(this,we,new se),t(X)(this,_e,new he),t(X)(this,Le,new pe),t(at)(this,Ce,je).call(this)}}({categorySelector:".categories_ul",searchSelector:".header__search-form",calendarSelector:".calendar__input"});new(0,N.default)("team-9-project");
//# sourceMappingURL=index.ae746591.js.map
