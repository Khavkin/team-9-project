{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-602892b2e4820c58.js","src/js/read.js","node_modules/@parcel/runtime-js/lib/runtime-8dfc85544cdac0f0.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"3hZM1\\\":\\\"read.f04d9065.js\\\",\\\"410VS\\\":\\\"icons.640475a3.svg\\\",\\\"dAuHR\\\":\\\"read.1b74c36b.js\\\",\\\"cDAuR\\\":\\\"read.7f0fffa7.js\\\"}\"));","// Plan\n//  2.3. sort dates in descending order.\n// 7. finish Todos.\n\nimport LocalStorage from './api/local-storage-api';\nimport icons from '../images/icons.svg';\nimport './navigation.js';\nimport './components/theme_switcher';\nimport { createMarkup, onBtnClick } from './news-cards.js';\nimport { normalizeImportFileName } from './utils';\n\nconst ls = new LocalStorage('team-9-project');\nconst readNews = ls.getRead();\nconst galleryEl = document.querySelector('.read-gallery');\nconst iconsURL = normalizeImportFileName(icons);\n\nfunction formatDate(ms) {\n    const date = new Date(ms);\n    const day = date.getDate();\n    const month = date.getMonth() + 1;\n    const year = date.getFullYear();\n    return `${day}/${month}/${year}`;\n}\n\nfunction groupByDate(news) {\n    const readByDate = new Map();\n    for (const newsEntity of news) {\n        const formattedReadDate = formatDate(newsEntity.readdate);\n        if (readByDate.has(formattedReadDate)) {\n            const newsForThisDate = readByDate.get(formattedReadDate);\n            newsForThisDate.push(newsEntity);\n        } else {\n            readByDate.set(formattedReadDate, [newsEntity]);\n        }\n    }\n    return readByDate;\n}\n\nconst readNewsGroupedByDate = groupByDate(readNews);\n\nif (readNews.length === 0) {\n    galleryEl.innerHTML = `<h2 class=\"rip-title\">Sorry, we haven't found any read news.\n    </h2>\n    <div class=\"rip-container container\">\n    </div>`;\n} else {\n    galleryEl.innerHTML = createMarkupForAllDates(readNewsGroupedByDate);\n}\n\nfunction createMarkupForAllDates(readNewsGroupedByDate) {\n    let text = `<ul class=\"read-gallery__list container\">`;\n    for (const date of readNewsGroupedByDate.keys()) {\n        const markupForOneDate = createMarkupForOneDate(\n            date,\n            readNewsGroupedByDate.get(date)\n        );\n        text += markupForOneDate;\n    }\n    text += `</ul>`;\n    return text;\n}\n\nfunction createMarkupForOneDate(date, news) {\n    const iconupURL = iconsURL; //icons.slice(0, icons.indexOf('icon-up'));\n    const iconDownURL = iconsURL; //iconsURL.slice(0,icons.indexOf('icon-down'));\n    let newsList = '';\n    for (const newsEntity of news) {\n        newsList += createMarkup({\n            abstract: newsEntity.snippet,\n            title: newsEntity.title,\n            updated: formatDate(newsEntity.readdate || newsEntity.newsdate),\n            nytdsection: newsEntity.sectionname || newsEntity.section,\n            url: newsEntity.url,\n            media: newsEntity.image,\n            uri: newsEntity.uri,\n        });\n    }\n    return `<li class=\"read-gallery__item\">\n        <div class=\"date-span\">\n        ${date}   \n        <span class=\"read-gallery__iconswrap\" data-opened=\"true\">\n        <svg class=\"read-gallery__iconup\" width=\"9\" height=\"14\">\n            <use href=\"${iconupURL}#icon-up\">\n            </use>\n        </svg>\n        <svg class=\"read-gallery__icondown\" width=\"9\" height=\"14\">\n            <use href=\"${iconDownURL}#icon-down\">\n            </use>\n        </svg>\n        </span>\n        </div>\n        <hr class=\"read-gallery__divider\">\n        <ul class=\"news-list\">\n            ${newsList}\n        </ul>\n    </li>`;\n};\n// TODO: refactor function toggle (children and parent elements) because of dependency on DOM tree\ndocument.querySelector('.news-list').addEventListener('click', onBtnClick);\n\nfunction toggleDate(e) {\n    e.preventDefault();\n    const span = e.currentTarget;\n    if (span.dataset.opened === 'true') {\n        span.children[0].style.display = 'none';\n        span.children[1].style.display = 'inline';\n        span.dataset.opened = 'false';\n        span.parentElement.parentElement.children[2].style.display = 'none';\n    } else {\n        span.children[0].style.display = 'inline';\n        span.children[1].style.display = 'none';\n        span.dataset.opened = 'true';\n        span.parentElement.parentElement.children[2].style.removeProperty(\n            'display'\n        );\n    }\n};\n\nconst iconsEl = document.getElementsByClassName('read-gallery__iconswrap');\nconst iconsArr = Array.from(iconsEl);\n\niconsArr.map(galleryIcon => galleryIcon.addEventListener('click', toggleDate));\n\nfunction onError(error) {\n    console.error(error);\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('3hZM1') + require('./helpers/bundle-manifest').resolve(\"410VS\");"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$iB7CT","$14e5871938c58d1c$exports","getBundleURL","resolve","$95b4463fc8ac9448$var$readNews","default","getRead","$95b4463fc8ac9448$var$galleryEl","document","querySelector","$95b4463fc8ac9448$var$iconsURL","$1RLhk","normalizeImportFileName","$parcel$interopDefault","$95b4463fc8ac9448$var$formatDate","ms","date","Date","day","getDate","month","getMonth","year","getFullYear","concat","$95b4463fc8ac9448$var$readNewsGroupedByDate","news","readByDate","Map","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","newsEntity","formattedReadDate","readdate","has","get","push","set","return","$95b4463fc8ac9448$var$groupByDate","$95b4463fc8ac9448$var$createMarkupForOneDate","iconupURL","iconDownURL","newsList","$dOFS2","createMarkup","abstract","snippet","title","updated","newsdate","nytdsection","sectionname","section","media","image","uri","$95b4463fc8ac9448$var$toggleDate","e","preventDefault","span","currentTarget","dataset","opened","children","style","display","parentElement","removeProperty","innerHTML","readNewsGroupedByDate1","text","markupForOneDate","$95b4463fc8ac9448$var$createMarkupForAllDates","addEventListener","onBtnClick","$95b4463fc8ac9448$var$iconsEl","getElementsByClassName","Array","from","map","galleryIcon"],"version":3,"file":"read.f04d9065.js.map"}